'use client';
import { useState } from 'react';
import { auth, googleProvider } from '../lib/firebase';
import { signInWithEmailAndPassword, createUserWithEmailAndPassword, signInWithPopup } from 'firebase/auth';
import { useRouter } from 'next/navigation';
export default function Login(){const [mode,setMode]=useState('login');const [email,setEmail]=useState('');const [pass,setPass]=useState('');const router=useRouter();async function submit(e){e.preventDefault();try{if(mode==='login')await signInWithEmailAndPassword(auth,email,pass);else await createUserWithEmailAndPassword(auth,email,pass);router.push('/chat');}catch(err){alert(err.message);}}async function google(){try{await signInWithPopup(auth,googleProvider);router.push('/chat');}catch(e){alert(e.message);}}return (<div style={{maxWidth:440,margin:'0 auto'}}><h3>{mode==='login' ? 'Login' : 'Register'}</h3><form onSubmit={submit} style={{display:'grid',gap:8}}><input value={email} onChange={e=>setEmail(e.target.value)} placeholder="Email" required /><input value={pass} onChange={e=>setPass(e.target.value)} placeholder="Password" type="password" required /><div style={{display:'flex',gap:8}}><button className="btn-primary" type="submit">{mode==='login' ? 'Login' : 'Create'}</button><button type="button" className="btn-ghost" onClick={()=>setMode(mode==='login'?'register':'login')}>{mode==='login'?'Create account':'Have account? Login'}</button></div></form><div style={{marginTop:12}}><button className="btn-ghost" onClick={google}>Continue with Google</button></div></div>);}
